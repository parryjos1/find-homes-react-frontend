{"ast":null,"code":"var _jsxFileName = \"/Users/joshparry/sei/projects/project-2/react-frontend-project2/project2-frontend/src/WishList.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\n\nclass WishList extends Component {\n  constructor() {\n    super();\n\n    this.getWishList = () => {\n      //userToken is stored in localStorage\n      axios.get('https://find-homes.herokuapp.com/wishlists', {\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem('userToken')\n        }\n      }).then(res => {\n        // console.log(res.data.listings);\n        // console.log(res.data.name);\n        this.setState({\n          listings: res.data.listings,\n          name: res.data.name\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.deleteListing = (id, index) => {\n      // console.log('delete listing id', id);\n      // console.log('index', index)\n      // delete listing from users wishList in the database\n      axios.delete(\"https://find-homes.herokuapp.com/wishlists/\" + id, {\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem('userToken')\n        }\n      }).then(res => {\n        console.log(res); // update page\n        // make a copy of the users listings because you cannot change the state directly\n\n        const newListings = [...this.state.listings]; // console.log(newListings);\n        //remove deleted listing via splicing\n\n        newListings.splice(index, 1); // console.log(newListings);\n        // update this.state.listings\n        // so the rendered view no longer shows it\n\n        this.setState({\n          listings: newListings\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.state = {\n      listings: []\n    };\n  }\n\n  componentDidMount() {\n    this.getWishList();\n  } // end of ComponentDidMount\n\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"component\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"Welcome, \", this.state.name, \" \"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, this.state.listings.length > 0 ? this.state.listings.map((listing, index) => React.createElement(\"div\", {\n      key: listing.id,\n      className: \"listings\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/listing/\".concat(listing.domain_id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"listings-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, listing.headline)), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, listing.address))), React.createElement(\"div\", {\n      className: \"listings-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/listing/\".concat(listing.domain_id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: listing.image,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      onClick: () => this.deleteListing(listing.id, index),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \" Delete\")))) : React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"loading\")));\n  }\n\n}\n\nexport default WishList;","map":{"version":3,"sources":["/Users/joshparry/sei/projects/project-2/react-frontend-project2/project2-frontend/src/WishList.jsx"],"names":["React","Component","Link","axios","WishList","constructor","getWishList","get","headers","Authorization","localStorage","getItem","then","res","setState","listings","data","name","catch","err","console","log","deleteListing","id","index","delete","newListings","state","splice","componentDidMount","render","length","map","listing","domain_id","headline","address","image"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios'\n\n\n\nclass WishList extends Component {\n  constructor(){\n    super();\n    this.state = {\n      listings: [],\n    }\n  }\n\n\n  componentDidMount(){\n    this.getWishList();\n\n  } // end of ComponentDidMount\n\n  getWishList = () => {\n    //userToken is stored in localStorage\n\n    axios.get('https://find-homes.herokuapp.com/wishlists', {\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem('userToken')\n      }\n    })\n    .then( res =>{\n      // console.log(res.data.listings);\n      // console.log(res.data.name);\n\n      this.setState({\n        listings: res.data.listings,\n        name: res.data.name\n      })\n\n    })\n    .catch( err => {\n      console.log(err);\n    });\n  }\n\n  deleteListing = (id, index) => {\n    // console.log('delete listing id', id);\n    // console.log('index', index)\n\n    // delete listing from users wishList in the database\n\n    axios.delete(`https://find-homes.herokuapp.com/wishlists/` + id, {\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem('userToken')\n      }\n    })\n\n    .then( res =>{\n      console.log(res);\n      // update page\n\n      // make a copy of the users listings because you cannot change the state directly\n      const newListings = [...this.state.listings];\n      // console.log(newListings);\n\n      //remove deleted listing via splicing\n      newListings.splice(index, 1);\n      // console.log(newListings);\n\n      // update this.state.listings\n      // so the rendered view no longer shows it\n      this.setState({\n        listings: newListings\n      })\n    }).catch( err => {\n        console.log(err);\n    });\n  }\n\n\n  render(){\n    return(\n      <div className=\"component\">\n        <h2>Welcome, {this.state.name} </h2>\n        <div>\n        {\n          this.state.listings.length > 0\n          ?\n          this.state.listings.map( (listing, index) => (\n                      <div key={listing.id} className=\"listings\">\n              <Link to={`/listing/${listing.domain_id}`}>\n\n                    <div className=\"listings-left\">\n                      <p><strong>{listing.headline}</strong></p>\n                      <p>{listing.address}</p>\n                    </div></Link><div className=\"listings-right\">\n                    <Link to={`/listing/${listing.domain_id}`}>\n                      <img src={listing.image}/>\n                      </Link>\n                      <button onClick={ ()=>this.deleteListing(listing.id, index) }> Delete\n                      </button>\n                    </div>\n                  </div>\n\n            ))\n          :\n          <p>loading</p>\n\n        }\n      </div>\n      </div>\n    )\n\n  }\n\n}\n\nexport default WishList;\n"]},"metadata":{},"sourceType":"module"}