{"ast":null,"code":"var _jsxFileName = \"/Users/joshparry/sei/projects/project-2/react-frontend-project2/project2-frontend/src/components/MapContainer.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport GoogleMapReact from 'google-map-react';\nimport SearchSelectedArea from './SearchSelectedArea';\nimport DisplayProperties from './DisplayProperties';\nimport Slider, { Range } from 'rc-slider';\nimport 'rc-slider/assets/index.css';\nconst wrapperStyle = {\n  width: \"80vw\",\n  'margin-top': \"25px\",\n  'margin-left': \"10px\",\n  'margin-bottom': \"25px\"\n};\n\nconst AnyReactComponent = ({\n  text\n}) => React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 14\n  },\n  __self: this\n}, text);\n\nconst testMarkerArray = [];\n\nrequire('dotenv').config();\n\nconst API_KEY = process.env.REACT_APP_GOOGLE_MAPS_API_KEY2; // console.log('API KEY', API_KEY, process.env);\n\n/* Stack-based Douglas Peucker line simplification routine\n   returned is a reduced GLatLng array\n   After code by  Dr. Gary J. Robinson,\n   Environmental Systems Science Centre,\n   University of Reading, Reading, UK\n\n   http://www.bdcc.co.uk/Gmaps/GDouglasPeuker.js\n*/\n// Douglas–Peucker algorithm (https://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm)\n// used to return an array of the polygon points based on lines drawn\n\nfunction GDouglasPeucker(source, kink)\n/* source[] Input coordinates in GLatLngs \t*/\n\n/* kink\tin metres, kinks above this depth kept  */\n\n/* kink depth is the height of the triangle abc where a-b and b-c are two consecutive line segments */\n{\n  var n_source, n_stack, n_dest, start, end, i, sig;\n  var dev_sqr, max_dev_sqr, band_sqr;\n  var x12, y12, d12, x13, y13, d13, x23, y23, d23;\n  var F = Math.PI / 180.0 * 0.5;\n  var index = new Array();\n  /* aray of indexes of source points to include in the reduced line */\n\n  var sig_start = new Array();\n  /* indices of start & end of working section */\n\n  var sig_end = new Array();\n  /* check for simple cases */\n\n  if (source.length < 3) return source;\n  /* one or two points */\n\n  /* more complex case. initialize stack */\n\n  n_source = source.length;\n  band_sqr = kink * 360.0 / (2.0 * Math.PI * 6378137.0);\n  /* Now in degrees */\n\n  band_sqr *= band_sqr;\n  n_dest = 0;\n  sig_start[0] = 0;\n  sig_end[0] = n_source - 1;\n  n_stack = 1;\n  /* while the stack is not empty  ... */\n\n  while (n_stack > 0) {\n    /* ... pop the top-most entries off the stacks */\n    start = sig_start[n_stack - 1];\n    end = sig_end[n_stack - 1];\n    n_stack--;\n\n    if (end - start > 1) {\n      /* any intermediate points ? */\n\n      /* ... yes, so find most deviant intermediate point to\n             either side of line joining start & end points */\n      x12 = source[end].lng() - source[start].lng();\n      y12 = source[end].lat() - source[start].lat();\n      if (Math.abs(x12) > 180.0) x12 = 360.0 - Math.abs(x12);\n      x12 *= Math.cos(F * (source[end].lat() + source[start].lat()));\n      /* use avg lat to reduce lng */\n\n      d12 = x12 * x12 + y12 * y12;\n\n      for (i = start + 1, sig = start, max_dev_sqr = -1.0; i < end; i++) {\n        x13 = source[i].lng() - source[start].lng();\n        y13 = source[i].lat() - source[start].lat();\n        if (Math.abs(x13) > 180.0) x13 = 360.0 - Math.abs(x13);\n        x13 *= Math.cos(F * (source[i].lat() + source[start].lat()));\n        d13 = x13 * x13 + y13 * y13;\n        x23 = source[i].lng() - source[end].lng();\n        y23 = source[i].lat() - source[end].lat();\n        if (Math.abs(x23) > 180.0) x23 = 360.0 - Math.abs(x23);\n        x23 *= Math.cos(F * (source[i].lat() + source[end].lat()));\n        d23 = x23 * x23 + y23 * y23;\n        if (d13 >= d12 + d23) dev_sqr = d23;else if (d23 >= d12 + d13) dev_sqr = d13;else dev_sqr = (x13 * y12 - y13 * x12) * (x13 * y12 - y13 * x12) / d12; // solve triangle\n\n        if (dev_sqr > max_dev_sqr) {\n          sig = i;\n          max_dev_sqr = dev_sqr;\n        }\n      }\n\n      if (max_dev_sqr < band_sqr) {\n        /* is there a sig. intermediate point ? */\n\n        /* ... no, so transfer current start point */\n        index[n_dest] = start;\n        n_dest++;\n      } else {\n        /* ... yes, so push two sub-sections on stack for further processing */\n        n_stack++;\n        sig_start[n_stack - 1] = sig;\n        sig_end[n_stack - 1] = end;\n        n_stack++;\n        sig_start[n_stack - 1] = start;\n        sig_end[n_stack - 1] = sig;\n      }\n    } else {\n      /* ... no intermediate points, so transfer current start point */\n      index[n_dest] = start;\n      n_dest++;\n    }\n  }\n  /* transfer last point */\n\n\n  index[n_dest] = n_source - 1;\n  n_dest++;\n  /* make return array */\n\n  var r = new Array();\n\n  for (var i = 0; i < n_dest; i++) r.push(source[index[i]]);\n\n  return r;\n}\n\nexport default class MapContainer extends Component {\n  constructor(props) {\n    super(props); // map & maps are from GoogleReactComponent - wrapper for map\n\n    this.onSliderChangeBedrooms = e => {\n      // console.log(e);\n      this.setState({\n        bedrooms: e\n      });\n    };\n\n    this.onSliderChangeBathrooms = e => {\n      // console.log(e);\n      this.setState({\n        bathrooms: e\n      });\n    };\n\n    this.onSliderChangeMaxPrice = e => {\n      // console.log(e);\n      if (e === 0) {\n        this.setState({\n          max_price: 100000000\n        });\n      } else {\n        this.setState({\n          max_price: e\n        });\n      }\n    };\n\n    this.getDomainToken = () => {\n      const railsDomainTokenRequest = axios.get(\"https://find-homes.herokuapp.com/domain_token\").then(result => {\n        console.log(\"The result is: \".concat(result));\n        this.setState({\n          domain_token: result.data\n        });\n        localStorage.setItem('domainToken', result.data.data);\n      });\n      console.log(\"railsDomainTokenRequest is: \".concat(railsDomainTokenRequest));\n      return railsDomainTokenRequest;\n    };\n\n    this.handleApiLoaded = ({\n      map,\n      maps\n    }) => {\n      console.log('LOADED', map, maps); // debugger;\n\n      this.setState({\n        map: map,\n        maps: maps\n      });\n    };\n\n    this.freeDrawMouseDown = () => {\n      //the polygon\n      let poly = new this.state.maps.Polyline({\n        map: this.state.map,\n        clickable: false\n      }); //move-listener\n\n      let move = this.state.maps.event.addListener(this.state.map, 'mousemove', function (e) {\n        poly.getPath().push(e.latLng);\n      });\n      const that = this; //mouseup-listener\n\n      this.state.maps.event.addListenerOnce(this.state.map, 'mouseup', function (e) {\n        that.state.maps.event.removeListener(move);\n        var path = poly.getPath(); // what is this? and how does it know where the path has moved\n\n        poly.setMap(null); //?*?\n        // Gets the path of the mouse movements but why is that on the mouse up?\n\n        var theArrayofLatLng = path.j; // What is path.j? ?*?\n\n        var arrayforPolygontoUse = GDouglasPeucker(theArrayofLatLng, 50);\n        console.log(\"ArrayforPolygontoUse\", arrayforPolygontoUse); // By this point, you will have the array of lat/lng coordinates, which you can\n        // save into state:\n\n        const searchPath = arrayforPolygontoUse.map(pos => ({\n          lat: pos.lat(),\n          lon: pos.lng()\n        })); // const searchPath = arrayforPolygontoUse.map( pos => [ pos.lat(), pos.lng() ] );\n\n        that.setState({\n          searchAreaPath: searchPath\n        });\n        console.log('path', searchPath);\n        var polyOptions = {\n          map: that.state.map,\n          fillColor: '#0099FF',\n          fillOpacity: 0.7,\n          strokeColor: '#AA2143',\n          strokeWeight: 2,\n          clickable: false,\n          zIndex: 1,\n          path: arrayforPolygontoUse,\n          editable: false\n        };\n        poly = new that.state.maps.Polygon(polyOptions);\n        that.state.maps.event.clearListeners(that.state.map.getDiv(), 'mousedown');\n        that.state.map.setOptions({\n          draggable: true,\n          zoomControl: true,\n          scrollwheel: true,\n          disableDoubleClickZoom: true\n        });\n      }); // mouseup-handler\n    };\n\n    this.freeDraw = event => {\n      // ?*? what is map.setOptions?\n      this.state.map.setOptions({\n        draggable: false,\n        zoomControl: false,\n        scrollwheel: false,\n        disableDoubleClickZoom: false\n      });\n      this.state.maps.event.addDomListener(this.state.map.getDiv(), 'mousedown', this.freeDrawMouseDown);\n    };\n\n    this.selectedPropCallBack = e => {\n      console.log(\"~~~~e is: \".concat(e));\n      this.setState({\n        selectedPropertyLocations: e\n      });\n    };\n\n    this.searchBySuburb = e => {\n      e.preventDefault();\n      this.props.history.push({\n        // pathname: '/searchlistings',\n        pathname: '/searchproperties',\n        state: {\n          // bedrooms: this.state.bedrooms,\n          // bathrooms: this.state.bathrooms,\n          // max_price: this.state.max_price,\n          // suburb: this.state.suburb,\n          domainToken: this.state.domain_token.data\n        }\n      });\n    };\n\n    this.state = {\n      map: null,\n      maps: null,\n      searchAreaPath: [],\n      domain_token: '',\n      selectedPropertyLocations: [],\n      bedrooms: 0,\n      bathrooms: 0,\n      max_price: 100000000,\n      suburb: ''\n    };\n  } // Sydney City Lat & Lng for default\n\n\n  // handleChange refactored when not using imported component\n  handleChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  } // Slider Handlers\n\n\n  componentDidMount() {\n    // get's domain token from rails database\n    this.getDomainToken();\n  } // gets domain token by making an axios request to the rails server which runs the logic to       generate a token\n  // the results of axios query is then saved to state\n\n\n  //searchBySuburb()\n  render() {\n    return React.createElement(\"div\", {\n      className: \"mapContainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        height: '80vh',\n        width: '84vw',\n        margin: 'auto'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: wrapperStyle,\n      className: \"searchBedrooms\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342\n      },\n      __self: this\n    }, \"Min Bedrooms\"), React.createElement(Slider, {\n      min: 0,\n      defaultValue: 0,\n      marks: {\n        0: 0,\n        1: 1,\n        2: 2,\n        3: 3,\n        4: 4\n      },\n      step: null,\n      onChange: this.onSliderChangeBedrooms,\n      max: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      style: wrapperStyle,\n      className: \"searchBathrooms\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346\n      },\n      __self: this\n    }, \"Min Bathrooms\"), React.createElement(Slider, {\n      min: 0,\n      defaultValue: 0,\n      marks: {\n        0: 0,\n        1: 1,\n        2: 2,\n        3: 3,\n        4: 4\n      },\n      step: null,\n      onChange: this.onSliderChangeBathrooms,\n      max: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      style: wrapperStyle,\n      className: \"maxPrice\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350\n      },\n      __self: this\n    }, \"Max Price ($m)\"), React.createElement(Slider, {\n      min: 0,\n      defaultValue: 0,\n      marks: {\n        0: 'Any',\n        2000000: 2,\n        4000000: 4,\n        6000000: 6,\n        8000000: 8,\n        10000000: 10\n      },\n      step: null,\n      onChange: this.onSliderChangeMaxPrice,\n      max: 10000000,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"map-container-button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      id: \"search-with-map\",\n      onClick: this.freeDraw,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358\n      },\n      __self: this\n    }, \"SEARCH WITH MAP\"), React.createElement(\"button\", {\n      onClick: this.searchBySuburb,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359\n      },\n      __self: this\n    }, \"SEARCH BY SUBURB\")), React.createElement(GoogleMapReact, {\n      bootstrapURLKeys: {\n        key: API_KEY\n      },\n      defaultCenter: this.props.center,\n      defaultZoom: this.props.zoom,\n      onGoogleApiLoaded: this.handleApiLoaded,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365\n      },\n      __self: this\n    }, this.state.selectedPropertyLocations.length > 0 && this.state.selectedPropertyLocations.map(p => React.createElement(AnyReactComponent, {\n      lat: p.listing.propertyDetails.latitude,\n      lng: p.listing.propertyDetails.longitude,\n      text: React.createElement(Link, {\n        to: \"/listing/\".concat(p.listing.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380\n        },\n        __self: this\n      }, \"X\")),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377\n      },\n      __self: this\n    })))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389\n      },\n      __self: this\n    }, this.state.searchAreaPath.length > 0 ? React.createElement(DisplayProperties, {\n      polygonDrawn: this.state.searchAreaPath,\n      domainToken: this.state.domain_token,\n      selectedPropCallBack: this.selectedPropCallBack,\n      bedrooms: this.state.bedrooms,\n      bathrooms: this.state.bathrooms,\n      maxPrice: this.state.max_price,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394\n      },\n      __self: this\n    }) : React.createElement(\"div\", {\n      id: \"select-area-on-map\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396\n      },\n      __self: this\n    }, \"Select DRAW WITH MAP button and draw a circle on map\")));\n  }\n\n} // End of MapContainer\n// ``````~~~~~~ How MapContainer works  ~~~~~~~~~```````\n\n/*\n\n1. A Map is rendered on the Page from the Google Map Component\n    - GoogleMapReact is a google map library google-map-react (https://github.com/google-map-react/google-map-react)\n    - it allows you to render any google react component on the google map\n    - ?*? what does the handleApiLoaded function do?\n\n2. FreeDraw function allows you to draw on the Google map\n    -   FreeDraw() is called on the OnClick function of the button\n    -\n3.\n\n\n\n\n*/\n\nMapContainer.defaultProps = {\n  center: {\n    lat: -33.8708,\n    lng: 151.2073\n  },\n  zoom: 15\n};","map":{"version":3,"sources":["/Users/joshparry/sei/projects/project-2/react-frontend-project2/project2-frontend/src/components/MapContainer.jsx"],"names":["React","Component","Link","axios","GoogleMapReact","SearchSelectedArea","DisplayProperties","Slider","Range","wrapperStyle","width","AnyReactComponent","text","testMarkerArray","require","config","API_KEY","process","env","REACT_APP_GOOGLE_MAPS_API_KEY2","GDouglasPeucker","source","kink","n_source","n_stack","n_dest","start","end","i","sig","dev_sqr","max_dev_sqr","band_sqr","x12","y12","d12","x13","y13","d13","x23","y23","d23","F","Math","PI","index","Array","sig_start","sig_end","length","lng","lat","abs","cos","r","push","MapContainer","constructor","props","onSliderChangeBedrooms","e","setState","bedrooms","onSliderChangeBathrooms","bathrooms","onSliderChangeMaxPrice","max_price","getDomainToken","railsDomainTokenRequest","get","then","result","console","log","domain_token","data","localStorage","setItem","handleApiLoaded","map","maps","freeDrawMouseDown","poly","state","Polyline","clickable","move","event","addListener","getPath","latLng","that","addListenerOnce","removeListener","path","setMap","theArrayofLatLng","j","arrayforPolygontoUse","searchPath","pos","lon","searchAreaPath","polyOptions","fillColor","fillOpacity","strokeColor","strokeWeight","zIndex","editable","Polygon","clearListeners","getDiv","setOptions","draggable","zoomControl","scrollwheel","disableDoubleClickZoom","freeDraw","addDomListener","selectedPropCallBack","selectedPropertyLocations","searchBySuburb","preventDefault","history","pathname","domainToken","suburb","handleChange","target","name","value","componentDidMount","render","height","margin","key","center","zoom","p","listing","propertyDetails","latitude","longitude","id","defaultProps"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\n\nimport GoogleMapReact from 'google-map-react';\nimport SearchSelectedArea from './SearchSelectedArea'\nimport DisplayProperties from './DisplayProperties'\nimport Slider, { Range } from 'rc-slider';\nimport 'rc-slider/assets/index.css';\n\nconst wrapperStyle = { width: \"80vw\", 'margin-top': \"25px\", 'margin-left': \"10px\", 'margin-bottom': \"25px\"};\n\n\nconst AnyReactComponent = ({ text }) => <div>{text}</div>;\n\nconst testMarkerArray = []\n\nrequire('dotenv').config();\n\nconst API_KEY = process.env.REACT_APP_GOOGLE_MAPS_API_KEY2;\n// console.log('API KEY', API_KEY, process.env);\n\n/* Stack-based Douglas Peucker line simplification routine\n   returned is a reduced GLatLng array\n   After code by  Dr. Gary J. Robinson,\n   Environmental Systems Science Centre,\n   University of Reading, Reading, UK\n\n   http://www.bdcc.co.uk/Gmaps/GDouglasPeuker.js\n*/\n\n// Douglas–Peucker algorithm (https://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm)\n// used to return an array of the polygon points based on lines drawn\nfunction GDouglasPeucker (source, kink)\n/* source[] Input coordinates in GLatLngs \t*/\n/* kink\tin metres, kinks above this depth kept  */\n/* kink depth is the height of the triangle abc where a-b and b-c are two consecutive line segments */\n{\n    var\tn_source, n_stack, n_dest, start, end, i, sig;\n    var dev_sqr, max_dev_sqr, band_sqr;\n    var x12, y12, d12, x13, y13, d13, x23, y23, d23;\n    var F = ((Math.PI / 180.0) * 0.5 );\n    var index = new Array(); /* aray of indexes of source points to include in the reduced line */\n\tvar sig_start = new Array(); /* indices of start & end of working section */\n    var sig_end = new Array();\n\n    /* check for simple cases */\n\n    if ( source.length < 3 )\n        return(source);    /* one or two points */\n\n    /* more complex case. initialize stack */\n\n\tn_source = source.length;\n    band_sqr = kink * 360.0 / (2.0 * Math.PI * 6378137.0);\t/* Now in degrees */\n    band_sqr *= band_sqr;\n    n_dest = 0;\n    sig_start[0] = 0;\n    sig_end[0] = n_source-1;\n    n_stack = 1;\n\n    /* while the stack is not empty  ... */\n    while ( n_stack > 0 ){\n\n        /* ... pop the top-most entries off the stacks */\n\n        start = sig_start[n_stack-1];\n        end = sig_end[n_stack-1];\n        n_stack--;\n\n        if ( (end - start) > 1 ){  /* any intermediate points ? */\n\n                /* ... yes, so find most deviant intermediate point to\n                       either side of line joining start & end points */\n\n            x12 = (source[end].lng() - source[start].lng());\n            y12 = (source[end].lat() - source[start].lat());\n            if (Math.abs(x12) > 180.0)\n                x12 = 360.0 - Math.abs(x12);\n            x12 *= Math.cos(F * (source[end].lat() + source[start].lat()));/* use avg lat to reduce lng */\n            d12 = (x12*x12) + (y12*y12);\n\n            for ( i = start + 1, sig = start, max_dev_sqr = -1.0; i < end; i++ ){\n\n                x13 = (source[i].lng() - source[start].lng());\n                y13 = (source[i].lat() - source[start].lat());\n                if (Math.abs(x13) > 180.0)\n                    x13 = 360.0 - Math.abs(x13);\n                x13 *= Math.cos (F * (source[i].lat() + source[start].lat()));\n                d13 = (x13*x13) + (y13*y13);\n\n                x23 = (source[i].lng() - source[end].lng());\n                y23 = (source[i].lat() - source[end].lat());\n                if (Math.abs(x23) > 180.0)\n                    x23 = 360.0 - Math.abs(x23);\n                x23 *= Math.cos(F * (source[i].lat() + source[end].lat()));\n                d23 = (x23*x23) + (y23*y23);\n\n                if ( d13 >= ( d12 + d23 ) )\n                    dev_sqr = d23;\n                else if ( d23 >= ( d12 + d13 ) )\n                    dev_sqr = d13;\n                else\n                    dev_sqr = (x13 * y12 - y13 * x12) * (x13 * y12 - y13 * x12) / d12;// solve triangle\n\n                if ( dev_sqr > max_dev_sqr  ){\n                    sig = i;\n                    max_dev_sqr = dev_sqr;\n                }\n            }\n\n            if ( max_dev_sqr < band_sqr ){   /* is there a sig. intermediate point ? */\n                /* ... no, so transfer current start point */\n                index[n_dest] = start;\n                n_dest++;\n            }\n            else{\n                /* ... yes, so push two sub-sections on stack for further processing */\n                n_stack++;\n                sig_start[n_stack-1] = sig;\n                sig_end[n_stack-1] = end;\n                n_stack++;\n                sig_start[n_stack-1] = start;\n                sig_end[n_stack-1] = sig;\n            }\n        }\n        else{\n                /* ... no intermediate points, so transfer current start point */\n                index[n_dest] = start;\n                n_dest++;\n        }\n    }\n\n    /* transfer last point */\n    index[n_dest] = n_source-1;\n    n_dest++;\n\n    /* make return array */\n    var r = new Array();\n    for(var i=0; i < n_dest; i++)\n        r.push(source[index[i]]);\n    return r;\n\n}\n\n\nexport default class MapContainer extends Component {\n\n  constructor(props){\n    super(props);\n\n    // map & maps are from GoogleReactComponent - wrapper for map\n    this.state = {\n      map: null,\n      maps: null,\n      searchAreaPath: [],\n      domain_token: '',\n      selectedPropertyLocations: [],\n      bedrooms: 0,\n      bathrooms: 0,\n      max_price: 100000000,\n      suburb: '',\n    };\n\n  }\n\n  // Sydney City Lat & Lng for default\n  static defaultProps = {\n    center: {\n      lat: -33.8708,\n      lng: 151.2073\n    },\n    zoom: 15\n  };\n\n  // handleChange refactored when not using imported component\n  handleChange(e) {\n     this.setState({ [e.target.name] : e.target.value });\n  }\n\n  // Slider Handlers\n  onSliderChangeBedrooms = (e) => {\n    // console.log(e);\n    this.setState({bedrooms: e})\n  }\n  onSliderChangeBathrooms = (e) => {\n    // console.log(e);\n    this.setState({bathrooms: e})\n  }\n  onSliderChangeMaxPrice = (e) => {\n    // console.log(e);\n\n    if (e === 0) {\n      this.setState({max_price: 100000000})\n    } else {\n      this.setState({max_price: e})\n    }\n  }\n\n  componentDidMount() {\n\n    // get's domain token from rails database\n    this.getDomainToken();\n\n  }\n\n  // gets domain token by making an axios request to the rails server which runs the logic to       generate a token\n  // the results of axios query is then saved to state\n  getDomainToken = () => {\n     const railsDomainTokenRequest = axios.get(\"https://find-homes.herokuapp.com/domain_token\").then(result => {\n       console.log(`The result is: ${result}`);\n       this.setState({domain_token: result.data})\n       localStorage.setItem('domainToken', result.data.data)\n     })\n     console.log(`railsDomainTokenRequest is: ${railsDomainTokenRequest}`);\n     return railsDomainTokenRequest\n  }\n\n  // ?*? what is this function do what is map and what is maps?\n  handleApiLoaded = ({map, maps}) => {\n    console.log('LOADED', map, maps);\n    // debugger;\n    this.setState({\n      map: map,\n      maps: maps\n    });\n  }\n\n  freeDrawMouseDown = () => {\n\n    //the polygon\n    let poly = new this.state.maps.Polyline({map:this.state.map,clickable:false});\n\n    //move-listener\n    let move=this.state.maps.event.addListener(this.state.map,'mousemove',function(e){\n        poly.getPath().push(e.latLng);\n    });\n\n\n    const that = this;\n\n    //mouseup-listener\n    this.state.maps.event.addListenerOnce(this.state.map,'mouseup',function(e){\n\n        that.state.maps.event.removeListener(move);\n        var path=poly.getPath(); // what is this? and how does it know where the path has moved\n        poly.setMap(null);\n\n        //?*?\n        // Gets the path of the mouse movements but why is that on the mouse up?\n        var theArrayofLatLng = path.j; // What is path.j? ?*?\n        var arrayforPolygontoUse= GDouglasPeucker(theArrayofLatLng,50);\n        console.log(\"ArrayforPolygontoUse\", arrayforPolygontoUse);\n\n        // By this point, you will have the array of lat/lng coordinates, which you can\n        // save into state:\n        const searchPath = arrayforPolygontoUse.map( pos => ({ lat: pos.lat(), lon: pos.lng() }) );\n        // const searchPath = arrayforPolygontoUse.map( pos => [ pos.lat(), pos.lng() ] );\n\n        that.setState({\n          searchAreaPath:  searchPath\n        });\n\n        console.log('path', searchPath);\n\n\n        var polyOptions = {\n            map: that.state.map,\n            fillColor: '#0099FF',\n            fillOpacity: 0.7,\n            strokeColor: '#AA2143',\n            strokeWeight: 2,\n            clickable: false,\n            zIndex: 1,\n            path: arrayforPolygontoUse,\n            editable: false\n        }\n\n        poly=new that.state.maps.Polygon(polyOptions);\n\n        that.state.maps.event.clearListeners(that.state.map.getDiv(), 'mousedown');\n\n        that.state.map.setOptions({\n            draggable: true,\n            zoomControl: true,\n            scrollwheel: true,\n            disableDoubleClickZoom: true\n        });\n\n    });  // mouseup-handler\n\n  } //freeDrawMouseDown()\n\n  freeDraw = (event) => {\n    // ?*? what is map.setOptions?\n    this.state.map.setOptions({\n        draggable: false,\n        zoomControl: false,\n        scrollwheel: false,\n        disableDoubleClickZoom: false\n    });\n\n\n    this.state.maps.event.addDomListener(this.state.map.getDiv(), 'mousedown', this.freeDrawMouseDown);\n\n  } //freeDraw()\n\n  selectedPropCallBack = (e) => {\n    console.log(`~~~~e is: ${e}`);\n    this.setState({selectedPropertyLocations: e})\n  }\n\n  // Upon submitting suburb form route to SearchedShowListing Route and pass along these state. Can be found under: history > location > staten >\n  searchBySuburb = (e) => {\n    e.preventDefault()\n\n    this.props.history.push({\n      // pathname: '/searchlistings',\n      pathname: '/searchproperties',\n      state: {\n        // bedrooms: this.state.bedrooms,\n        // bathrooms: this.state.bathrooms,\n        // max_price: this.state.max_price,\n        // suburb: this.state.suburb,\n        domainToken: this.state.domain_token.data\n      }\n    })\n  } //searchBySuburb()\n\n\n  render(){\n\n\n    return (\n      <div className=\"mapContainer\">\n      <div style={{ height: '80vh', width: '84vw', margin: 'auto' }}>\n\n\n\n        <div>\n          <div style={wrapperStyle} className=\"searchBedrooms\">\n            <p>Min Bedrooms</p>\n            <Slider min={0} defaultValue={0} marks={{ 0: 0, 1: 1, 2: 2, 3: 3, 4: 4}} step={null} onChange={this.onSliderChangeBedrooms} max={4} />\n          </div>\n          <div style={wrapperStyle} className=\"searchBathrooms\">\n            <p>Min Bathrooms</p>\n            <Slider min={0} defaultValue={0} marks={{ 0: 0, 1: 1, 2: 2, 3: 3, 4: 4}} step={null} onChange={this.onSliderChangeBathrooms} max={4} />\n          </div>\n          <div style={wrapperStyle} className=\"maxPrice\">\n            <p>Max Price ($m)</p>\n            <Slider min={0} defaultValue={0} marks={{ 0: 'Any', 2000000: 2 , 4000000: 4 , 6000000: 6 , 8000000: 8 , 10000000: 10 }} step={null} onChange={this.onSliderChangeMaxPrice} max={10000000} />\n          </div>\n        </div>\n\n\n        <div className=\"map-container-button\">\n\n          <button id=\"search-with-map\" onClick={this.freeDraw}>SEARCH WITH MAP</button>\n          <button onClick={this.searchBySuburb}>SEARCH BY SUBURB</button>\n\n        </div>\n\n\n\n        <GoogleMapReact\n          bootstrapURLKeys={{ key: API_KEY }}\n          defaultCenter={this.props.center}\n          defaultZoom={this.props.zoom}\n           onGoogleApiLoaded={this.handleApiLoaded}\n        >\n\n\n      {\n        this.state.selectedPropertyLocations.length > 0\n        &&\n         this.state.selectedPropertyLocations.map(p =>\n        <AnyReactComponent\n          lat={p.listing.propertyDetails.latitude}\n          lng={p.listing.propertyDetails.longitude}\n          text= <Link to={`/listing/${p.listing.id}`}><strong>X</strong></Link>\n        />\n      )\n    }\n\n\n      </GoogleMapReact>\n      </div>\n      <br />\n      <div>\n      {\n        this.state.searchAreaPath.length > 0\n        ?\n\n       <DisplayProperties polygonDrawn={this.state.searchAreaPath} domainToken={this.state.domain_token} selectedPropCallBack={this.selectedPropCallBack} bedrooms={this.state.bedrooms} bathrooms={this.state.bathrooms} maxPrice={this.state.max_price}/>\n       :\n       <div id=\"select-area-on-map\">Select DRAW WITH MAP button and draw a circle on map</div>\n      }\n     </div>\n     </div>\n   );\n }\n} // End of MapContainer\n\n\n// ``````~~~~~~ How MapContainer works  ~~~~~~~~~```````\n/*\n\n1. A Map is rendered on the Page from the Google Map Component\n    - GoogleMapReact is a google map library google-map-react (https://github.com/google-map-react/google-map-react)\n    - it allows you to render any google react component on the google map\n    - ?*? what does the handleApiLoaded function do?\n\n2. FreeDraw function allows you to draw on the Google map\n    -   FreeDraw() is called on the OnClick function of the button\n    -\n3.\n\n\n\n\n*/\n"]},"metadata":{},"sourceType":"module"}