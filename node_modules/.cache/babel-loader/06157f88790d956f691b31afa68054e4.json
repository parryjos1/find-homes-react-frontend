{"ast":null,"code":"var _jsxFileName = \"/Users/joshparry/sei/projects/project-2/react-frontend-project2/project2-frontend/src/components/ShowListing.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\n\nclass ShowListing extends Component {\n  constructor() {\n    super();\n\n    this.addListing = (domainId, address, image, headline, latitude, longitude) => {\n      axios.post('https://find-homes.herokuapp.com/wishlists/', {\n        domainId: domainId,\n        address: address,\n        image: image,\n        headline: headline,\n        latitude: latitude,\n        longitude: longitude\n      }, {\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem('userToken')\n        }\n      }).then(res => {\n        console.log(res);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.getDomainTokenAndFetchListing = domainId => {\n      axios.get(\"https://find-homes.herokuapp.com/domain_token\").then(result => {\n        console.log(\"The domain token is:\", result.data.data);\n        const domainToken = result.data.data;\n        this.getListingById(domainId, domainToken); // this.setState({domain_token: result.data})\n      });\n    };\n\n    this.getListingById = (listingId, accessToken) => {\n      return axios.get(\"https://api.domain.com.au/v1/listings/\".concat(listingId), {\n        headers: {\n          'Authorization': \"Bearer \".concat(accessToken)\n        }\n      }).then(result => {\n        console.log(result.data);\n        this.setState({\n          listing: result.data,\n          listingImages: result.data.media,\n          price: result.data.priceDetails.displayPrice,\n          address: result.data.addressParts.displayAddress\n        });\n      }).catch(err => console.error(err));\n    };\n\n    this.state = {\n      listing: {},\n      listingImages: [],\n      price: '',\n      address: ''\n    };\n  }\n\n  componentDidMount() {\n    const domainId = this.props.match.params.id;\n    this.getDomainTokenAndFetchListing(domainId);\n  } // headline, image, address, latitude, longitude, domainId\n  // // onClick={()=>this.addListing(this.state.listing.id)}\n  //\n  //   addListing = (headline, , latitude, longitude, )\n\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"component\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => this.addListing(this.state.listing.id, this.state.listing.addressParts.displayAddress, this.state.listingImages[0].url, this.state.listing.headline, this.state.listing.geoLocation.latitude, this.state.listing.geoLocation.longitude),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Add This house\"), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, this.state.listing.headline), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, this.state.address), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Bathrooms\"), \": \", this.state.listing.bathrooms), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"Bedrooms\"), \": \", this.state.listing.bedrooms), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"Car spaces\"), \": \", this.state.listing.carspaces), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Price\"), \": \", this.state.price), this.state.listingImages.length > 0 ? this.state.listingImages.map((image, index) => React.createElement(\"img\", {\n      className: \"show-images\",\n      key: index,\n      src: image.url,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    })) : React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"loading\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, this.state.listing.description));\n  }\n\n}\n\nexport default ShowListing;","map":{"version":3,"sources":["/Users/joshparry/sei/projects/project-2/react-frontend-project2/project2-frontend/src/components/ShowListing.jsx"],"names":["React","Component","Link","axios","ShowListing","constructor","addListing","domainId","address","image","headline","latitude","longitude","post","headers","Authorization","localStorage","getItem","then","res","console","log","catch","err","getDomainTokenAndFetchListing","get","result","data","domainToken","getListingById","listingId","accessToken","setState","listing","listingImages","media","price","priceDetails","displayPrice","addressParts","displayAddress","error","state","componentDidMount","props","match","params","id","render","url","geoLocation","bathrooms","bedrooms","carspaces","length","map","index","description"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\n\n\n\nclass ShowListing extends Component {\n  constructor(){\n    super();\n    this.state = {\n      listing: {},\n      listingImages: [],\n      price: '',\n      address: ''\n    }\n  }\n\n\n  componentDidMount(){\n    const domainId = this.props.match.params.id;\n    this.getDomainTokenAndFetchListing(domainId);\n\n  }\n\n  // headline, image, address, latitude, longitude, domainId\n\n  // // onClick={()=>this.addListing(this.state.listing.id)}\n  //\n  //   addListing = (headline, , latitude, longitude, )\n\n  addListing = (domainId, address, image, headline, latitude, longitude) => {\n\n    axios.post('https://find-homes.herokuapp.com/wishlists/', {domainId: domainId, address: address, image: image, headline: headline, latitude: latitude, longitude: longitude}, {\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem('userToken')\n      }\n    }).then( res =>{\n      console.log(res);\n    }).catch(err => {\n      console.log(err);\n    })\n\n  }; //end of addListing\n\n  getDomainTokenAndFetchListing = (domainId) => {\n     axios.get(\"https://find-homes.herokuapp.com/domain_token\")\n     .then(result => {\n       console.log(`The domain token is:`, result.data.data);\n       const domainToken = result.data.data;\n       this.getListingById( domainId, domainToken );\n       // this.setState({domain_token: result.data})\n     })\n  }\n\n  getListingById = (listingId, accessToken) => {\n  return axios.get(`https://api.domain.com.au/v1/listings/${listingId}`, {\n      headers: {\n          'Authorization': `Bearer ${accessToken}`,\n      }\n  }).then(result => {\n      console.log(result.data);\n      this.setState({\n        listing: result.data,\n        listingImages: result.data.media,\n        price: result.data.priceDetails.displayPrice,\n        address: result.data.addressParts.displayAddress\n      })\n  }).catch(err => console.error(err))\n  }\n\n\n  render(){\n    return(\n      <div className=\"component\">\n        <button onClick={()=>this.addListing(this.state.listing.id, this.state.listing.addressParts.displayAddress, this.state.listingImages[0].url, this.state.listing.headline, this.state.listing.geoLocation.latitude, this.state.listing.geoLocation.longitude )}>Add This house</button>\n\n        <h2>{this.state.listing.headline}</h2>\n        <h3>{this.state.address}</h3>\n        <p><strong>Bathrooms</strong>: {this.state.listing.bathrooms}</p>\n        <p><strong>Bedrooms</strong>: {this.state.listing.bedrooms}</p>\n        <p><strong>Car spaces</strong>: {this.state.listing.carspaces}</p>\n\n        <p><strong>Price</strong>: {this.state.price}</p>\n\n\n          {\n            this.state.listingImages.length > 0\n            ?\n            this.state.listingImages.map( (image, index) => (\n              <img className=\"show-images\" key={index} src={image.url}/>\n            ))\n            :\n            <p>loading</p>\n          }\n        <p>{this.state.listing.description}</p>\n\n\n      </div>\n    )\n  }\n\n}\n\nexport default ShowListing;\n"]},"metadata":{},"sourceType":"module"}